services:

    Jul6Art\PushBundle\EventListener\AbstractAsyncEntityEventListener:
        parent: Jul6Art\CoreBundle\EventListener\AbstractEntityEventListener
        abstract: true
        calls:
            - [setBus, ['@messenger.default_bus']]

    Jul6Art\PushBundle\MessageHandler\EntityAsyncEventHandler:
        calls:
            - [setNotificationHandler, ['@App\Handler\NotificationHandler']]
        tags: [messenger.message_handler]

    Jul6Art\PushBundle\Service\Pusher:
        calls:
            - [setBus, ['@messenger.default_bus']]
            - [setPublisher, ['@Symfony\Component\Mercure\PublisherInterface']]
        arguments:
            - '%push.async%'
            - '%push.enabled%'
